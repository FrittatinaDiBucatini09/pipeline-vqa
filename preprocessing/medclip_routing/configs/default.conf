# ==============================================================================
# CONFIGURATION FILE: MedCLIP Agentic Routing Defaults
# ==============================================================================
# Description:
#   Default configuration for the query-aware routing preprocessing stage.
#   SciSpacy evaluates query quality, Gemma-2-2B-it expands brief queries,
#   and BiomedCLIP + GradCAM generates bounding boxes.
# ==============================================================================

# --- 1. CORE SETUP ---
IMAGE_NAME="medclip_routing:3090"

# --- 2. CSV METADATA MAPPING ---
METADATA_FILENAME="gemex_VQA_mimic_mapped.csv"
PATH_COLUMN="image_path"
TEXT_COLUMN="question"
VIS_REGIONS_COL="visual_regions"

# --- 3. HARDWARE & PERFORMANCE ---
BATCH_SIZE=8
NUM_WORKERS=4

# --- 4. DEBUGGING & LIMITS ---
WANDB_MODE="disabled"
# Set to an integer (e.g., "50") to limit processing to the first N images.
# Leave empty ("") to process the entire dataset.
STOP_AFTER=""

# --- 5. BIOMEDCLIP + GRADCAM PARAMETERS ---
MODEL_NAME="hf-hub:microsoft/BiomedCLIP-PubMedBERT_256-vit_base_patch16_224"
CLIP_VERSION="ViT-B/16"
CAM_THRESHOLD=0.50
CAM_VERSION="gScoreCAM"
TOPK=300
ENABLE_MULTI_BOXES="true"
MIN_BOX_AREA="0.005"

# --- 6. ROUTING THRESHOLDS ---
# Minimum number of clinical entities for a query to be considered "detailed"
ENTITY_THRESHOLD=2
# Minimum word count for a query to be considered "detailed"
WORD_THRESHOLD=5

# --- 7. GEMMA QUERY EXPANSION ---
GEMMA_MAX_NEW_TOKENS=128
